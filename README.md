# Planets? Yes!

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->

## Install

``` sh
pip install ids-finder
```

## How to use

Import the package

``` python
from ids_finder.utils.basic import *
from ids_finder.core import *
```

## Motivations

## Methods

Traditional methods for ID identiﬁcation, such as the criteria of

- Burlaga & Ness (1969; B-criterion) : a directional change of the
  magnetic ﬁeld larger than 30° during 60 s
- Tsurutani & Smith (1979; TS-criterion) : $|ΔB|/|B| \geq 0.5$ within 3
  minutes

Mostly rely on magnetic ﬁeld variations with a certain time lag.
B-criterion has, as its main condition.

In their methods, the IDs below the thresholds are artiﬁcially
abandoned. Therefore, identiﬁcation criteria may affect the statistical
results, and there is likely to be a discrepancy between the ﬁndings via
B-criterion and TS- criterion.

### ID identification (limited feature extraction / anomaly detection)

Liu’s method : The ﬁrst two conditions guar- antee that the ﬁeld changes
of the IDs identiﬁed are large enough to be distinguished from the
stochastic ﬂuctuations on magnetic ﬁelds, while the third is a
supplementary condition to reduce the uncertainty of recognition.

$$ \textrm{Index}_1 = \frac{\sigma(\vec{B})}{Max(\sigma(\vec{B}_-),\sigma(\vec{B}_+))} $$

$$ \textrm{Index}_2 = \frac{\sigma(\vec{B}_- + \vec{B}_+)} {\sigma(\vec{B}_-) + \sigma(\vec{B}_+)} $$

$$ \textrm{Index}_3 = \frac{| \Delta \vec{B} |}{|B_{bg}|} $$

$$ \textrm{Index}_1 \ge 2, \textrm{Index}_2 \ge 1, \textrm{Index}_3 \ge 0.1 $$

## Conventions

As we are dealing with multiple spacecraft, we need to be careful about
naming conventions. Here are the conventions we use in this project.

- `sat_id`: name of the spacecraft. We also use abbreviation, for
  example
  - `sta` for `STEREO-A`
  - `thb` for `ARTEMIS-B`
- `sat_state`: state data of the spacecraft
- `b_vl`: maxium variance vector of the magnetic field, (major
  eigenvector)

### Columns naming conventions

- `radial_distance`: radial distance of the spacecraft, in units of $AU$
- `sw_speed`: solar wind plasma speed, in units of $km/s$
- `sw_elevation`: solar wind elevation angle, in units of $\degree$
- `sw_azimuth`: solar wind azimuth angle, in units of $\degree$
- `sw_vel_{r,t,n}`: solar wind plasma speed in the RTN coordinate
  system, in units of $km/s$
- `sw_vel_gse_{x,y,z}`: solar wind plasma speed in the GSE coordinate
  system, in units of \$km/s
- `sw_vel_lmn_{1,2,3}`: solar wind plasma speed in the LMN coordinate
  system, in units of $km/s$
  - `sw_vel_l`: abbreviation for `sw_vel_lmn_1`
  - `sw_vel_mn`
- `sw_density`: solar wind plasma density, in units of $1/cm^{3}$
- `sw_temperature`: solar wind plasma temperature, in units of $K$
- `b_vecL_{r,t,n}`: maxium variance vector of the magnetic field in the
  RTN coordinate system
- `b_{r,t,n}`: magnetic field in the RTN coordinate system
- `b_gse_{x,y,z}`: magnetic field in the GSE coordinate system
- `b_mag`: magnetic field magnitude
- `model_b_{r,t,n}`: modelled magnetic field in the RTN coordinate
  system

Notes: we recommend use unique names for each variable, for example,
`sw_speed` instead of `speed`. Because it is easier to search and
replace the variable names in the code whenever necessary.

For the dataframe unit, we use

- length : $km$
- time : $s$
- magnetic field : $nT$
- current : $A/m^2$

## Optimizations

``` markdown
python -X importtime -c 'from ids_finder.pipelines.juno.pipeline import download_juno_data, preprocess_jno' 2> import.log && tuna import.log
```

python -X importtime -c ‘from ids_finder.pipelines.juno.pipeline import
download_juno_data, preprocess_jno’ 2\> import.log

## TODOs

- Analysis
  - [ ] Check `STEREO-A` and `ARTEMIS-B` data
- Identifaction
  - [ ] Smoothing is important?
  - [ ] Check change point algorithm
- [ ] Refactor
  - [ ] `process_candidates` to exclude `sat_state` logics
  - [ ] renaming feature layer `candidates`
- Features
  - [ ] investigate `d_star` too large
- [ ] Distribution of \|B\| over radius
- [ ] Compare with other methods of identifying IDs
  - [ ] Verify with other methods of identifying IDs
- [ ] Incorporate solar wind propagation model
  - [ ] Verify with solar wind propagation model
    - [ ] Coordinate transformation
- [ ] Kedro
  - [ ] Modular pipelines
  - [ ] Incorporate `lineapy`

### bugs

- [ ] juno `sw_temperature` type
